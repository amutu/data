CREATE TABLE crashlog (
    uin bigint DEFAULT 0,
    clientversion integer DEFAULT 0,
    revision character(32),
    crashtime timestamp without time zone,
    runtime integer DEFAULT 0,
    indexid integer DEFAULT 0,
    idcid integer DEFAULT 0,
    countryid integer DEFAULT 0,
    osversion integer DEFAULT 0,
    phoneid integer DEFAULT 0,
    crashtype character(10),
    class1 character(32),
    class2 character(32),
    class3 character(32),
    int_reserved integer DEFAULT 0,
    char_reserved1 character(32),
    char_reserved2 character(32),
    logtime timestamp without time zone DEFAULT clock_timestamp() NOT NULL,
    CONSTRAINT check_char_length CHECK ((((((((octet_length(revision) <= 32) AND (octet_length(crashtype) <= 10)) AND (octet_length(class1) <= 32)) AND (octet_length(class2) <= 32)) AND (octet_length(class3) <= 32)) AND (octet_length(char_reserved1) <= 32)) AND (octet_length(char_reserved2) <= 32)))
);
COPY crashlog (uin, clientversion, revision, crashtime, runtime, indexid, idcid, countryid, osversion, phoneid, crashtype, class1, class2, class3, int_reserved, char_reserved1, char_reserved2, logtime) FROM stdin;
create table wx_version as select distinct clientversion from crashlog;
insert into crashlog select t.* from crashlog t,generate_series(1,1) g(i);
select cs_create('crashlog','logtime','clientversion');
 cs_create 
-----------
 
(1 row)

select crashlog_load();
 crashlog_load 
---------------
          4000
(1 row)

select x.clientversion a ,cs_count(x.uin) b,cs_count(x.uin) c,cs_count(x.logtime) d, cs_count(x.class1) e, cs_count(x.class2) f, cs_count(x.class3) g ,cs_count(x.revision) h,cs_count(x.phoneid) i from wx_version,crashlog_get(clientversion) as x where x is not null;
     a     |  b  |  c  |  d  |  e  |  f  |  g  |  h  |  i  
-----------+-----+-----+-----+-----+-----+-----+-----+-----
 604307710 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 352321555 |  20 |  20 |  20 |  20 |  20 |  20 |  20 |  20
 620888113 | 626 | 626 | 626 | 626 | 626 | 626 | 626 | 626
 604176602 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 352321553 |   4 |   4 |   4 |   4 |   4 |   4 |   4 |   4
 620888368 |  10 |  10 |  10 |  10 |  10 |  10 |  10 |  10
 620888360 |   4 |   4 |   4 |   4 |   4 |   4 |   4 |   4
 620888400 |   6 |   6 |   6 |   6 |   6 |   6 |   6 |   6
 604176609 |  14 |  14 |  14 |  14 |  14 |  14 |  14 |  14
 604307728 |  22 |  22 |  22 |  22 |  22 |  22 |  22 |  22
 604176603 |   6 |   6 |   6 |   6 |   6 |   6 |   6 |   6
 604307749 |  98 |  98 |  98 |  98 |  98 |  98 |  98 |  98
 352321792 | 100 | 100 | 100 | 100 | 100 | 100 | 100 | 100
 604307713 |  78 |  78 |  78 |  78 |  78 |  78 |  78 |  78
 620888369 |  34 |  34 |  34 |  34 |  34 |  34 |  34 |  34
 620888387 |   6 |   6 |   6 |   6 |   6 |   6 |   6 |   6
 352321841 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 620888388 | 378 | 378 | 378 | 378 | 378 | 378 | 378 | 378
 620822583 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 604307745 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 352321842 |  14 |  14 |  14 |  14 |  14 |  14 |  14 |  14
 604307708 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 620888132 | 240 | 240 | 240 | 240 | 240 | 240 | 240 | 240
 604307739 | 854 | 854 | 854 | 854 | 854 | 854 | 854 | 854
 352321552 |  36 |  36 |  36 |  36 |  36 |  36 |  36 |  36
 620888112 |  16 |  16 |  16 |  16 |  16 |  16 |  16 |  16
 604176608 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 620888128 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 620822595 |  14 |  14 |  14 |  14 |  14 |  14 |  14 |  14
 352452625 |  12 |  12 |  12 |  12 |  12 |  12 |  12 |  12
 620757808 |  26 |  26 |  26 |  26 |  26 |  26 |  26 |  26
 620757029 |  24 |  24 |  24 |  24 |  24 |  24 |  24 |  24
 604111038 |  48 |  48 |  48 |  48 |  48 |  48 |  48 |  48
 620757508 |   2 |   2 |   2 |   2 |   2 |   2 |   2 |   2
 604307707 |   6 |   6 |   6 |   6 |   6 |   6 |   6 |   6
 604111039 | 838 | 838 | 838 | 838 | 838 | 838 | 838 | 838
 604307738 |   6 |   6 |   6 |   6 |   6 |   6 |   6 |   6
 620888130 |   8 |   8 |   8 |   8 |   8 |   8 |   8 |   8
 352322323 |   4 |   4 |   4 |   4 |   4 |   4 |   4 |   4
 620757031 |   4 |   4 |   4 |   4 |   4 |   4 |   4 |   4
 604307714 |  30 |  30 |  30 |  30 |  30 |  30 |  30 |  30
 620888384 |   6 |   6 |   6 |   6 |   6 |   6 |   6 |   6
 604307746 | 224 | 224 | 224 | 224 | 224 | 224 | 224 | 224
 352452627 |  16 |  16 |  16 |  16 |  16 |  16 |  16 |  16
 620757040 |  14 |  14 |  14 |  14 |  14 |  14 |  14 |  14
 620757816 |  20 |  20 |  20 |  20 |  20 |  20 |  20 |  20
 620888145 |  10 |  10 |  10 |  10 |  10 |  10 |  10 |  10
 604111040 |  64 |  64 |  64 |  64 |  64 |  64 |  64 |  64
 604176596 |   4 |   4 |   4 |   4 |   4 |   4 |   4 |   4
 352322321 |  24 |  24 |  24 |  24 |  24 |  24 |  24 |  24
 604307715 |   4 |   4 |   4 |   4 |   4 |   4 |   4 |   4
 620822576 |  10 |  10 |  10 |  10 |  10 |  10 |  10 |  10
(52 rows)

select crashlog_delete(clientversion,'2014-04-16 09:50:06','2014-04-16 09:50:30') from wx_version;
 crashlog_delete 
-----------------
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
               1
(52 rows)

select x.clientversion a ,cs_count(x.uin) b,cs_count(x.uin) c,cs_count(x.logtime) d, cs_count(x.class1) e, cs_count(x.class2) f, cs_count(x.class3) g ,cs_count(x.revision) h,cs_count(x.phoneid) i from wx_version,crashlog_get(clientversion) as x where x is not null;
     a     |  b  |  c  |  d  |  e  |  f  |  g  |  h  |  i  
-----------+-----+-----+-----+-----+-----+-----+-----+-----
 604307710 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 352321555 |  19 |  19 |  19 |  19 |  19 |  19 |  19 |  19
 620888113 | 625 | 625 | 625 | 625 | 625 | 625 | 625 | 625
 604176602 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 352321553 |   3 |   3 |   3 |   3 |   3 |   3 |   3 |   3
 620888368 |   9 |   9 |   9 |   9 |   9 |   9 |   9 |   9
 620888360 |   3 |   3 |   3 |   3 |   3 |   3 |   3 |   3
 620888400 |   5 |   5 |   5 |   5 |   5 |   5 |   5 |   5
 604176609 |  13 |  13 |  13 |  13 |  13 |  13 |  13 |  13
 604307728 |  21 |  21 |  21 |  21 |  21 |  21 |  21 |  21
 604176603 |   5 |   5 |   5 |   5 |   5 |   5 |   5 |   5
 604307749 |  97 |  97 |  97 |  97 |  97 |  97 |  97 |  97
 352321792 |  99 |  99 |  99 |  99 |  99 |  99 |  99 |  99
 604307713 |  77 |  77 |  77 |  77 |  77 |  77 |  77 |  77
 620888369 |  33 |  33 |  33 |  33 |  33 |  33 |  33 |  33
 620888387 |   5 |   5 |   5 |   5 |   5 |   5 |   5 |   5
 352321841 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 620888388 | 377 | 377 | 377 | 377 | 377 | 377 | 377 | 377
 620822583 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 604307745 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 352321842 |  13 |  13 |  13 |  13 |  13 |  13 |  13 |  13
 604307708 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 620888132 | 239 | 239 | 239 | 239 | 239 | 239 | 239 | 239
 604307739 | 853 | 853 | 853 | 853 | 853 | 853 | 853 | 853
 352321552 |  35 |  35 |  35 |  35 |  35 |  35 |  35 |  35
 620888112 |  15 |  15 |  15 |  15 |  15 |  15 |  15 |  15
 604176608 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 620888128 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 620822595 |  13 |  13 |  13 |  13 |  13 |  13 |  13 |  13
 352452625 |  11 |  11 |  11 |  11 |  11 |  11 |  11 |  11
 620757808 |  25 |  25 |  25 |  25 |  25 |  25 |  25 |  25
 620757029 |  23 |  23 |  23 |  23 |  23 |  23 |  23 |  23
 604111038 |  47 |  47 |  47 |  47 |  47 |  47 |  47 |  47
 620757508 |   1 |   1 |   1 |   1 |   1 |   1 |   1 |   1
 604307707 |   5 |   5 |   5 |   5 |   5 |   5 |   5 |   5
 604111039 | 837 | 837 | 837 | 837 | 837 | 837 | 837 | 837
 604307738 |   5 |   5 |   5 |   5 |   5 |   5 |   5 |   5
 620888130 |   7 |   7 |   7 |   7 |   7 |   7 |   7 |   7
 352322323 |   3 |   3 |   3 |   3 |   3 |   3 |   3 |   3
 620757031 |   3 |   3 |   3 |   3 |   3 |   3 |   3 |   3
 604307714 |  29 |  29 |  29 |  29 |  29 |  29 |  29 |  29
 620888384 |   5 |   5 |   5 |   5 |   5 |   5 |   5 |   5
 604307746 | 223 | 223 | 223 | 223 | 223 | 223 | 223 | 223
 352452627 |  15 |  15 |  15 |  15 |  15 |  15 |  15 |  15
 620757040 |  13 |  13 |  13 |  13 |  13 |  13 |  13 |  13
 620757816 |  19 |  19 |  19 |  19 |  19 |  19 |  19 |  19
 620888145 |   9 |   9 |   9 |   9 |   9 |   9 |   9 |   9
 604111040 |  63 |  63 |  63 |  63 |  63 |  63 |  63 |  63
 604176596 |   3 |   3 |   3 |   3 |   3 |   3 |   3 |   3
 352322321 |  23 |  23 |  23 |  23 |  23 |  23 |  23 |  23
 604307715 |   3 |   3 |   3 |   3 |   3 |   3 |   3 |   3
 620822576 |   9 |   9 |   9 |   9 |   9 |   9 |   9 |   9
(52 rows)

select count(1) from crashlog where logtime >= '2014-04-16 09:50:06' and logtime <= '2014-04-16 09:50:30';
 count 
-------
     0
(1 row)

